
# Add Openstack repository
sudo add-apt-repository cloud-archive:caracal

### Install and configure keystone ###

# Install MySQL
sudo apt install mariadb-server -y

# Create database variables for keystone
KEYSTONE_DB=keystone
KEYSTONE_DBUSER=keystone
KEYSTONE_DBPASS='a&7G!jKs8#Qp'

# Create keystone database and user
echo "DROP DATABASE IF EXISTS $KEYSTONE_DB; CREATE DATABASE $KEYSTONE_DB; GRANT ALL PRIVILEGES ON $KEYSTONE_DB.* TO '$KEYSTONE_DBUSER'@'localhost' IDENTIFIED BY '$KEYSTONE_DBPASS'; " | sudo mysql -u root

# Install keystone
sudo apt install keystone -y